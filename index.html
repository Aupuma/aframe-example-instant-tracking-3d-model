<!DOCTYPE html>
<html>

<head>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://libs.zappar.com/zappar-aframe/0.3.29/zappar-aframe.js"></script>
    <script src="https://unpkg.com/aframe-text-geometry-component/dist/aframe-text-geometry-component.min.js"></script>
    <script src="assets/src/fade-on-video-time-component.js"></script>
    <script src="assets/src/model-emissive-component.js"></script>
    <script src="assets/src/model-emissive-color-component.js"></script>
    <script src="assets/src/color-fix-component.js"></script>

    <meta charset="utf-8" />
    <title>Reevoluciona te desea Feliz Navidad</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
        }

        #zappar-placement-ui {
            position: absolute;
            bottom: 30px;
            width: 200px;
            left: calc(50% - 100px);

            background-color: #8ED108;
            color: black;
            text-align: center;
            font-family: sans-serif;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            visibility: hidden;
        }
    </style>
</head>

<body>
    

    <a-scene loading-screen="dotsColor: white; backgroundColor: #8ED108" renderer='precision: high; sortObjects: true'>
        <a-assets>
            <a-asset-item id="christmasTreeModel" src="assets/models/christmasTree.glb"></a-asset-item>
            <a-asset-item id="leftPageModel" src="assets/models/HojaIzquierda.glb"></a-asset-item>
            <a-asset-item id="rightPageModel" src="assets/models/HojaDerecha.glb"></a-asset-item>
            <a-asset-item id="LightbulbModel" src="assets/models/edisonLight.glb"></a-asset-item>
    
            <a-asset-item id="LatoRegular" src="assets/fonts/Lato_Regular.json"></a-asset-item>
            <a-asset-item id="LatoItalic" src="assets/fonts/Lato_Italic.json"></a-asset-item>
            <a-asset-item id="LatoItalicMSDF" src="assets/fonts/Lato-Italic-msdf.json"></a-asset-item>
    
            <video id="caresseSurLoceanVideo" src="https://test-aure.s3.eu-west-3.amazonaws.com/CaresseSurlOcean.mp4" preload="auto"></video>
            <img id="backgroundSky" src="assets/hdrBackground.jpg">
    
            <a-mixin id="christmasText" text="align: center; anchor: center; wrapCount: 29.56; width: 0.46; color: #1B2900;  
            font: assets/fonts/Lato-Italic-msdf.json; font-image: assets/fonts/Lato-Italic.png; negate: false; opacity:1"
            animation="property: components.text.material.uniforms.opacity.value; to: 1; dur: 2000; startEvents:fadeIn; autoplay:false">
            </a-mixin>
    
            <a-mixin id="christmasLightbulb" scale="0 0 0" gltf-model="#LightbulbModel" model-emissive="0"
            animation__initialScaling="property: scale; to:0.07 0.07 0.07; dur:500; startEvents:scale; autoplay:false; easing: easeOutQuad"
            animation__lightUp="property: model-emissive; to:10; dur: 4000; startEvents:fadeIn; autoplay:false"></a-mixin>
        </a-assets>

        <!-- Ask user for camera permissions, display some text if permission is denied -->
        <a-entity zappar-permissions-ui id="permissions"></a-entity>
        <!-- shows a full-page dialog that informs the user they're using an unsupported browser -->
        <a-entity zappar-compatibility-ui id="compatibility"></a-entity>

        <a-camera zappar-camera />

        <!-- Setup our instant tracker and start it in placement mode so the user can -->
        <!-- choose a location for the object -->
        <a-entity zappar-instant="placement-mode: true" id="instant-tracker">

            <a-entity id="christmasCard" rotation="0 0 0" position="-0.5 0 0" scale="2 2 2"
            animation="property:position; to: 0 0 0; dur: 2000; startEvents: moveToCenter">

                <a-entity id="lights" position="0 0.03715 0">
                    <a-entity id="light1"  rotation="-6.246958840311366 12.162175117241985 -0.10255944532841735" position="0.65847 -0.01567 -0.09544" mixin="christmasLightbulb"  color-fix
                    fade-on-video-time="6" model-emissive-color="green" class="lightBulb"></a-entity>

                    <a-entity id="light2"  rotation="-3.7322470774821825 -106.42060790980398 0.8961059915846076" position="-0.23741 -0.00735 -0.44265" mixin="christmasLightbulb"  color-fix
                    fade-on-video-time="16" model-emissive-color="yellow"></a-entity>

                    <a-entity id="light3"  rotation="-7.110406237573517 -46.92180567444364 -6.40280336058695" position="-0.33651 -0.01825 0.40432" mixin="christmasLightbulb"  color-fix
                    fade-on-video-time="24" model-emissive-color="red"></a-entity>

                    <a-entity id="light4"  rotation="-0.36612003108859603 -152.97113693300284 0.330596647790485" position="-0.64115 -0.00413 -0.13621" mixin="christmasLightbulb"  color-fix
                    fade-on-video-time="33" model-emissive-color="blue"></a-entity>

                    <a-entity id="light5"  rotation="-7.181453004169739 46.59865747798985 -1.721165216572993" position="0.22287 -0.01438 0.39581" mixin="christmasLightbulb"  color-fix
                    fade-on-video-time="41" model-emissive-color="green"></a-entity>

                    <a-entity id="light6"  rotation="-3.989505127495922 150.23010684109698 -6.158723339861219" position="0.60162 -0.00546 0.45922" mixin="christmasLightbulb"  color-fix
                    fade-on-video-time="62" model-emissive-color="yellow"></a-entity>

                    <a-entity id="light7"  rotation="-2.9472948981529545 123.56980767586464 -1.83747564898455" position="0.03876 -0.00904 -0.41435" mixin="christmasLightbulb"  color-fix
                    fade-on-video-time="96" model-emissive-color="red"></a-entity>

                    <a-entity id="light8"  rotation="-6.358112652566746 154.41499057673252 3.646303408212559" position="-0.70382 -0.01554 0.20986" mixin="christmasLightbulb"  color-fix
                    fade-on-video-time="110" model-emissive-color="blue"></a-entity>

                    <a-entity id="light9"  rotation="-6.920184249590083 -124.94719821535915 1.834037902213765" position="0.04035 -0.01992 0.53262" mixin="christmasLightbulb"  color-fix
                    fade-on-video-time="130" model-emissive-color="green"></a-entity>
                </a-entity>
                
                <a-entity id="leftPage" position="0 0 0" rotation="90 90 -90" gltf-model="#leftPageModel"
                animation="property:rotation; to: -90 90 -90; dur:2000; startEvents:open">
                
                    <a-video id="videoPlayer" position="-0.26283 0.09516 0.001" scale="0.29003 0.29003 0.29003" 
                    geometry="height: 0.9; width: 1.6" src="#caresseSurLoceanVideo"></a-video>
                    
                    <a-entity id="LargeText" mixin="christmasText" position="-0.26862 -0.10846 0"
                    text="value:“La diferencia entre dónde estuviste ayer y dónde vas a estar mañana, es lo que pienses, digas y hagas este día.”"></a-entity>
                    
                </a-entity>
                
                <a-entity id="rightPage" rotation="-90 0 0" gltf-model="#rightPageModel">

                    <a-entity id="PropósitoText" position="0.36479 0.12995 0" mixin="christmasText"
                        text="value:Propósito; opacity:0" fade-on-video-time="6">
                    </a-entity>
                    <a-entity id="DisciplinaText" position="0.11272 -0.1503 0" mixin="christmasText"
                        text="value:Disciplina; opacity:0" fade-on-video-time="16">
                    </a-entity>
                    <a-entity id="CohesiónText" position="0.15656 0.16752 0" mixin="christmasText"
                        text="value:Cohesión; opacity:0" fade-on-video-time="24">
                    </a-entity>
                    <a-entity id="IlusiónText" position="0.34913 -0.07672 0" mixin="christmasText"
                        text="value:Ilusión; opacity:0" fade-on-video-time="33">
                    </a-entity>
                    <a-entity id="PerseveranciaText" position="0.15186 0.07202 0" mixin="christmasText"
                        text="value:Perseverancia; opacity:0" fade-on-video-time="41">
                    </a-entity>
                    <a-entity id="ConfianzaText" position="0.31625 -0.15969 0" mixin="christmasText"
                        text="value:Confianza; opacity:0" fade-on-video-time="62">
                    </a-entity>
                    <a-entity id="EmpatíaText" position="0.36948 0.02035 0" mixin="christmasText"
                        text="value:Empatía; opacity:0" fade-on-video-time="96">
                    </a-entity>
                    <a-entity id="InfluenciaText" position="0.22232 -0.24267 0" mixin="christmasText"
                        text="value:Influencia; opacity:0" fade-on-video-time="110">
                    </a-entity>
                    <a-entity id="EsperanzaText" position="0.15969 -0.03914 0" mixin="christmasText"
                        text="value:Esperanza; opacity:0" fade-on-video-time="130">
                    </a-entity>
                    
                </a-entity>

                <a-entity id="christmasTree" scale="0 0 0" position="0.55828 -0.0145 -0.39539" gltf-model="#christmasTreeModel" 
                animation="property:scale; to: 0.30197 0.30197 0.30197; dur:2000; startEvents:scaleUp"
                ></a-entity>

            </a-entity>

        </a-entity>

        <a-sky src="#backgroundSky"></a-sky>
    </a-scene>

    <!-- Some UI for the user to tap to indicate they're happy with the placement -->
    <div id="zappar-placement-ui">Pulsa para colocar la tarjeta</div>

    <script src="assets/src/appManager.js"></script>
</body>

</html>
